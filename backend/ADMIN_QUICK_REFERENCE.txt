/* ==============================================
   ADMIN FEATURES - QUICK REFERENCE
   ============================================== */

## ğŸ¯ Admin Panel URLs
- Main Dashboard: http://localhost/paxyo/admin/index.php
- User SMM Page: http://localhost/paxyo/smm.php

## ğŸ” Admin Login
Default Password: admin123
(Change in admin/index.php line 15)

## âš¡ Real-time Features

### Dashboard Charts (Auto-updates every 5 seconds)
â”œâ”€â”€ Performance Chart (Line)
â”‚   â”œâ”€â”€ Orders (Left Axis, Blue)
â”‚   â””â”€â”€ Revenue (Right Axis, Purple)
â””â”€â”€ User Growth Chart (Bar)
    â””â”€â”€ New Users (Teal)

### Live Data Flow:
1. User places order on smm.php
2. Order saved to database  with discounted price
3. Within 5 seconds:
   - Charts update automatically
   - Order count increases
   - Revenue reflects discounted amount
   - No page refresh needed!

## ğŸ‰ Holiday Discount System

### Admin Side (admin/index.php â†’ Holidays Tab)
```
Create Holiday:
â”œâ”€â”€ Name: e.g., "Black Friday"
â”œâ”€â”€ Start Date: 2025-12-20
â”œâ”€â”€ End Date: 2025-12-25
â”œâ”€â”€ Discount %: 30
â””â”€â”€ Click "Add Event"

Manage Holidays:
â”œâ”€â”€ View all events in table
â”œâ”€â”€ Toggle Active/Inactive
â””â”€â”€ Delete events
```

### User Side (smm.php)
```
When holiday is active:
â”œâ”€â”€ Service Rate Display:
â”‚   â”œâ”€â”€ Shows: Ì¶4Ì¶0Ì¶0Ì¶.Ì¶0Ì¶0Ì¶  280.00 ETB (Black Friday)
â”‚   â””â”€â”€ Original crossed, discounted highlighted
â”œâ”€â”€ Total Charge Display:
â”‚   â”œâ”€â”€ Shows: Ì¶$Ì¶2Ì¶.Ì¶0Ì¶0Ì¶  $1.40  [-30% OFF]
â”‚   â””â”€â”€ Red badge with discount percentage
â””â”€â”€ Order Processing:
    â””â”€â”€ Saves $1.40 (discounted) to database
```

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Creates Holiday (30% off)            â”‚
â”‚  Start: Today, End: Tomorrow                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Opens smm.php                         â”‚
â”‚  PHP checks: holidays WHERE active AND      â”‚
â”‚  today BETWEEN start_date AND end_date      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Holiday Found! (30% discount)              â”‚
â”‚  JavaScript receives:                       â”‚
â”‚  - discountPercent: 30                      â”‚
â”‚  - holidayName: "Black Friday"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Selects Service                       â”‚
â”‚  Original Rate: $0.50 per 1K                â”‚
â”‚  Displayed: Ì¶$Ì¶0Ì¶.Ì¶5Ì¶0Ì¶  $0.35 (30% off)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Enters Quantity: 1000                 â”‚
â”‚  Calculation:                               â”‚
â”‚  - Original: 1000/1000 * 0.50 = $0.50       â”‚
â”‚  - Discount: 0.50 * 0.70 = $0.35            â”‚
â”‚  Display: Ì¶$Ì¶0Ì¶.Ì¶5Ì¶0Ì¶  $0.35  [-30% OFF]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Clicks "Place Order"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  process_order.php                          â”‚
â”‚  1. Check for active holiday again          â”‚
â”‚  2. Apply 30% discount to rate              â”‚
â”‚  3. Calculate: $0.35                        â”‚
â”‚  4. Deduct $0.35 from balance               â”‚
â”‚  5. Save order with charge = 0.35           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Dashboard                            â”‚
â”‚  Within 5 seconds:                          â”‚
â”‚  - Revenue chart +$0.35                     â”‚
â”‚  - Orders chart +1                          â”‚
â”‚  - Automatic update (no refresh)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Testing Quick Guide

### Test 1: Create Holiday
```bash
1. Login to admin
2. Go to Holidays tab
3. Fill form:
   Name: Test Sale
   Start: Today
   End: Tomorrow  
   Discount: 50
4. Click "Add Event"
5. âœ“ Should appear in table below
```

### Test 2: Verify Discount in SMM
```bash
1. Open smm.php in new tab
2. Select platform â†’ category â†’ service
3. âœ“ Should see: Ì¶OÌ¶rÌ¶iÌ¶gÌ¶iÌ¶nÌ¶aÌ¶lÌ¶  Discounted (Test Sale)
4. Enter quantity
5. âœ“ Charge should show: Ì¶OÌ¶lÌ¶dÌ¶  New [-50% OFF]
```

### Test 3: Place Discounted Order
```bash
1. Fill all order details
2. Click "Place Order"
3. âœ“ Should succeed
4. Go to Admin â†’ Orders
5. âœ“ Charge column should show discounted amount
6. Go to Admin â†’ Dashboard
7. âœ“ Within 5 seconds, charts should update
```

### Test 4: Disable Discount
```bash
1. Admin â†’ Holidays tab
2. Click status button (active â†’ inactive)
3. Refresh smm.php
4. âœ“ Prices should be normal (no strikethrough)
5. âœ“ No discount badges
```

### Test 5: Real-time Charts
```bash
1. Open Admin Dashboard
2. Open smm.php in another tab
3. Place an order
4. Switch back to Dashboard
5. âœ“ Within 5 seconds:
   - Charts should update
   - Revenue increases
   - Order count increases
   - No page reload needed
```

## ğŸ¨ Visual Elements

### Discount Indicators
```css
Original Price: color: gray, strikethrough
Discounted Price: color: accent (purple), bold
Discount Badge: bg: red, text: white, "-XX% OFF"
Holiday Name: text: green, size: tiny
```

### Chart Styles
```css
Orders Line: Blue (#4EA8DE), filled area
Revenue Line: Purple (#5E60CE), filled area
User Bars: Teal (#48BFE3), rounded corners
```

## ğŸ“± Mobile Responsive
- âœ… All features work on mobile
- âœ… Charts resize properly
- âœ… Tables scroll horizontally
- âœ… Forms adapt to screen size

## âš ï¸ Important Notes

1. **Holiday Overlap**: If multiple holidays are active, the highest discount applies
2. **Chart Performance**: Updates use in-place data modification (no chart recreation)
3. **Discount Validation**: Applied both frontend (display) and backend (processing)
4. **Real-time Interval**: 5 seconds (configurable in admin/index.php line 426)

## ğŸ› Troubleshooting

**Charts not updating?**
- Check browser console for errors
- Verify api_analytics.php is accessible
- Confirm database has order data for past 7 days

**Discounts not showing?**
- Check holiday status is "active"
- Verify today's date is between start_date and end_date
- Check browser console for PHP errors

**Orders not appearing in charts?**
- Verify orders table exists
- Check orders have created_at timestamps
- Ensure holiday discount was applied to charge column

## ğŸ¯ Success Criteria

All features working when:
- âœ… Charts update automatically every 5 seconds
- âœ… Holiday discounts display on smm.php
- âœ… Orders save with discounted prices
- âœ… Admin can manage holidays easily
- âœ… Users see clear discount indicators
- âœ… Dashboard reflects real-time data
