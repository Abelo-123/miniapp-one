const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OrderPage-Chwf6xyc.js","assets/react-vendor-C-oIHjE7.js","assets/tma-ui-BXUja-_9.js","assets/tma-ui-CjZnkA_L.css","assets/tma-sdk-B1EfXx2E.js","assets/HistoryPage-DwLqeVjH.js","assets/DepositPage-BCSsZB3k.js","assets/MorePage-DEM3SRAb.js","assets/eruda-BSaaGdH0.js"])))=>i.map(i=>d[i]);
import{r as o,j as n,d as Pe}from"./react-vendor-C-oIHjE7.js";import{T as $,S as we,a as Ee,A as Z,P as ke}from"./tma-ui-BXUja-_9.js";import{z as _,Y as p,U as w,Z as g,n as W,h as k,W as je,G as E,j as Oe,L as Ie,D as q,l as Le,J as De,H as Me,P as Re,a as Ne,$ as Be,b as Fe,c as Ue,e as Ve,T as J,N as He,C as ze,u as $e,S as Y,g as We,K as qe,d as G}from"./tma-sdk-B1EfXx2E.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const Je="modulepreload",Ye=function(e){return"/miniapp-one/"+e},K={},x=function(t,r,c){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=Promise.allSettled(r.map(h=>{if(h=Ye(h),h in K)return;K[h]=!0;const b=h.endsWith(".css"),T=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${T}`))return;const m=document.createElement("link");if(m.rel=b?"stylesheet":Je,b||(m.as="script"),m.crossOrigin="",m.href=h,f&&m.setAttribute("nonce",f),document.head.appendChild(m),b)return new Promise((j,A)=>{m.addEventListener("load",j),m.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&i(f.reason);return t().catch(i)})},X="https://paxyo.com/backend",Ge=[{id:"instagram",label:"Instagram",icon:"ðŸ“¸",keywords:["instagram","ig "],placeholder:"https://instagram.com/username"},{id:"tiktok",label:"TikTok",icon:"ðŸŽµ",keywords:["tiktok","tik tok"],placeholder:"https://tiktok.com/@username/video/..."},{id:"youtube",label:"YouTube",icon:"â–¶ï¸",keywords:["youtube","yt "],placeholder:"https://youtube.com/watch?v=..."},{id:"facebook",label:"Facebook",icon:"ðŸ‘¤",keywords:["facebook","fb "],placeholder:"https://facebook.com/..."},{id:"twitter",label:"Twitter / X",icon:"ðŸ¦",keywords:["twitter","x.com","tweet"],placeholder:"https://x.com/username/status/..."},{id:"telegram",label:"Telegram",icon:"âœˆï¸",keywords:["telegram","tg "],placeholder:"https://t.me/channel_name"},{id:"other",label:"Other",icon:"ðŸŒ",keywords:[],placeholder:"https://..."},{id:"top",label:"Top",icon:"â­",keywords:[],placeholder:"https://..."}];function Nt(e,t){const r=e.toLowerCase();return r.includes("follower")||r.includes("subscriber")?"Profile URL":r.includes("like")||r.includes("view")||r.includes("comment")?"Post/Video URL":Ge.find(s=>s.id===t)?.placeholder||"https://..."}function Bt(e){return e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" ETB"}const Ke=3e3,Ft=10;let C=null;function ee(){if(C!==null)return C;try{k(),C=!0}catch{C=!1}return C}function v(){try{_.selectionChanged.isAvailable()&&_.selectionChanged()}catch{}}function Qe(e="medium"){try{_.impactOccurred.isAvailable()&&_.impactOccurred(e)}catch{}}function Ze(e){try{_.notificationOccurred.isAvailable()&&_.notificationOccurred(e)}catch{}}async function te(e,t){try{E.setItem.isAvailable()&&await E.setItem(e,t)}catch{}}async function re(e){try{if(E.getItem.isAvailable())return await E.getItem(e)}catch{}}function Xe(){try{w.enableConfirmation.isAvailable()&&w.enableConfirmation()}catch{}}function et(){try{w.disableConfirmation.isAvailable()&&w.disableConfirmation()}catch{}}function tt(e){try{p.setParams.isAvailable()&&p.setParams({text:e.text,backgroundColor:e.color,textColor:e.textColor,isEnabled:e.isEnabled,isVisible:e.isVisible??!0,isLoaderVisible:e.isLoaderVisible})}catch{}}function rt(){try{p.setParams.isAvailable()&&p.setParams({isVisible:!0})}catch{}}function st(){try{p.setParams.isAvailable()&&p.setParams({isVisible:!1})}catch{}}function at(e){try{if(p.onClick.isAvailable())return p.onClick(e)}catch{}return()=>{}}function se(){try{W.expand.isAvailable()&&W.expand()}catch{}}function ae(){try{return je.state()?.user??null}catch{return null}}function oe(){try{g.ready.isAvailable()&&g.ready()}catch{}}function ot(e){try{g.setHeaderColor.isAvailable()&&g.setHeaderColor(e)}catch{}}function nt(e){try{g.setBackgroundColor.isAvailable()&&g.setBackgroundColor(e)}catch{}}const ct=Object.freeze(Object.defineProperty({__proto__:null,cloudGet:re,cloudSet:te,configureMainButton:tt,disableClosingConfirmation:et,enableClosingConfirmation:Xe,expandViewport:se,getInitDataUser:ae,hapticImpact:Qe,hapticNotification:Ze,hapticSelection:v,hideMainButton:st,isTelegramEnv:ee,onMainButtonClick:at,setBackgroundColor:nt,setHeaderColor:ot,showMainButton:rt,signalReady:oe},Symbol.toStringTag,{value:"Module"}));console.log("[API] Base URL:",X);async function y(e,t){const r=`${X}${e}`;console.log("[API] Fetching:",r);const c=await fetch(r,{headers:{"Content-Type":"application/json",...t?.headers||{}},...t});if(!c.ok){const i=await c.text();throw console.error("[API] Error:",c.status,i),new Error(i||`HTTP ${c.status}`)}const s=await c.json();return console.log("[API] Success:",e,s),s}const P="paxyo_services_cache",L="paxyo_services_timestamp",it=5*60*1e3;async function lt(e=!0){if(console.log("[Services] getServices called, useCache:",e),e){const t=localStorage.getItem(P),r=localStorage.getItem(L);if(t&&r){const c=Date.now()-parseInt(r);if(console.log("[Services] Cache age:",c,"ms"),c<it)return console.log("[Services] Using cached data"),JSON.parse(t)}}try{console.log("[Services] Fetching from API...");const t=await y("/get_service.php");return localStorage.setItem(P,JSON.stringify(t)),localStorage.setItem(L,Date.now().toString()),console.log("[Services] Got",t.length,"services"),t}catch(t){console.error("[Services] Error:",t);const r=localStorage.getItem(P);if(r)return console.log("[Services] Falling back to cache after error"),JSON.parse(r);throw t}}async function dt(){const e=await y("/get_service.php?refresh=1");return localStorage.setItem(P,JSON.stringify(e)),localStorage.setItem(L,Date.now().toString()),e}async function ut(){return y("/get_recommended.php")}async function Ut(e){return y("/process_order.php",{method:"POST",body:JSON.stringify(e)})}async function ft(){return y("/get_orders.php")}async function ht(){return y("/get_deposits.php")}async function mt(){return y("/get_alerts.php")}async function pt(){return y("/get_settings.php")}const ne=o.createContext(null);function D(){const e=o.useContext(ne);if(!e)throw new Error("useApp must be used within AppProvider");return e}function gt({children:e}){const t=ee(),[r,c]=o.useState(null),[s,i]=o.useState([]),[u,f]=o.useState([]),[h,b]=o.useState(null),[T,m]=o.useState(null),[j,A]=o.useState(null),[ce,M]=o.useState([]),[ie,R]=o.useState([]),[le,N]=o.useState([]),[de,ue]=o.useState([]),[fe,B]=o.useState("order"),[he,O]=o.useState([]),[me,pe]=o.useState(!1),[ge,F]=o.useState(0),[S,ye]=o.useState({rateMultiplier:1,discountPercent:0,holidayName:"",maintenanceMode:!1,userCanOrder:!0,marqueeText:"Welcome to Paxyo SMM!"}),U=o.useCallback(async()=>{try{const l=(await lt(!1)).map(d=>({id:d.service,category:d.category,name:d.name,type:d.type,rate:parseFloat(d.rate),min:d.min,max:d.max,averageTime:d.average_time||d.averageTime||"",refill:d.refill,cancel:d.cancel}));i(l),dt().catch(console.error)}catch(a){console.error("Failed to fetch services:",a)}},[]),V=o.useCallback(async()=>{try{const a=await ft();M(a.orders||[])}catch(a){console.error("Failed to fetch orders:",a)}},[]),H=o.useCallback(async()=>{try{const a=await ht();R(a||[])}catch(a){console.error("Failed to fetch deposits:",a)}},[]),z=o.useCallback(async()=>{try{const a=await mt();N(a.alerts||[]),F(a.unread_count||0)}catch(a){console.error("Failed to fetch alerts:",a)}},[]);o.useEffect(()=>{(async()=>{try{const l=await pt();ye(l)}catch(l){console.error("Failed to fetch settings:",l)}await U();try{const l=await ut();f(l||[])}catch(l){console.error("Failed to fetch recommended:",l)}V(),H(),z()})()},[]);const be=o.useCallback(a=>{c(l=>l&&{...l,balance:a})},[]),Se=o.useCallback((a,l)=>{const d=Date.now().toString()+Math.random().toString(36).slice(2);O(I=>[...I,{id:d,type:a,message:l}]),setTimeout(()=>{O(I=>I.filter(Te=>Te.id!==d))},Ke)},[]),ve=o.useCallback(a=>{O(l=>l.filter(d=>d.id!==a))},[]);o.useEffect(()=>{m(null),A(null)},[h]),o.useEffect(()=>{A(null)},[T]),o.useEffect(()=>{try{const a=ae();a&&c({id:a.id,first_name:a.first_name,last_name:a.last_name,username:a.username,display_name:[a.first_name,a.last_name].filter(Boolean).join(" "),photo_url:a.photo_url??"",balance:0})}catch{}},[]);const _e=o.useCallback(a=>{B(a),t&&(v(),te("last_tab",a))},[t]),xe=o.useCallback(a=>{b(a),a&&t&&v()},[t]),Ae=o.useCallback(a=>{A(a),a&&t&&v()},[t]);o.useEffect(()=>{t&&(async()=>{const a=await re("last_tab");a&&["order","history","deposit","more"].includes(a)&&B(a)})()},[t]);const Ce={user:r,isTelegramApp:t,services:s,recommendedIds:u,selectedPlatform:h,selectedCategory:T,selectedService:j,orders:ce,deposits:ie,alerts:le,chatMessages:de,rateMultiplier:S.rateMultiplier,discountPercent:S.discountPercent,holidayName:S.holidayName,maintenanceMode:S.maintenanceMode,userCanOrder:S.userCanOrder,marqueeText:S.marqueeText,activeTab:fe,toasts:he,isLoading:me,unreadAlerts:ge,setUser:c,setActiveTab:_e,setSelectedPlatform:xe,setSelectedCategory:m,setSelectedService:Ae,setOrders:M,setDeposits:R,setAlerts:N,setChatMessages:ue,setBalance:be,setIsLoading:pe,setUnreadAlerts:F,showToast:Se,removeToast:ve,refreshServices:U,refreshOrders:V,refreshDeposits:H,refreshAlerts:z};return n.jsx(ne.Provider,{value:Ce,children:e})}const yt=[{id:"order",label:"Order",icon:"ðŸ›’"},{id:"history",label:"History",icon:"ðŸ“‹"},{id:"deposit",label:"Deposit",icon:"ðŸ’°"},{id:"more",label:"More",icon:"âš™ï¸"}];function bt(){const{activeTab:e,setActiveTab:t,unreadAlerts:r}=D(),c=s=>{t(s),v()};return n.jsx($,{children:yt.map(s=>n.jsx($.Item,{selected:e===s.id,text:s.id==="more"&&r>0?`${s.label} (${r>9?"9+":r})`:s.label,onClick:()=>c(s.id),children:n.jsx("span",{style:{fontSize:24},children:s.icon})},s.id))})}const St={success:"âœ…",error:"âŒ",info:"â„¹ï¸"};function vt(){const{toasts:e,removeToast:t}=D();if(e.length===0)return null;const r=e[e.length-1];return n.jsx(we,{before:n.jsx("span",{style:{fontSize:20},children:St[r.type]||"â„¹ï¸"}),description:r.message,onClose:()=>t(r.id),duration:3e3,children:r.type==="success"?"Success":r.type==="error"?"Error":"Info"},r.id)}function _t({visible:e}){return e?n.jsx("div",{style:{position:"fixed",inset:0,zIndex:300,background:"var(--tg-theme-secondary-bg-color, rgba(0,0,0,0.5))",display:"flex",alignItems:"center",justifyContent:"center",opacity:.85},children:n.jsx(Ee,{size:"l"})}):null}const xt=o.lazy(()=>x(()=>import("./OrderPage-Chwf6xyc.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>({default:e.OrderPage}))),At=o.lazy(()=>x(()=>import("./HistoryPage-DwLqeVjH.js"),__vite__mapDeps([5,1,2,3,4])).then(e=>({default:e.HistoryPage}))),Ct=o.lazy(()=>x(()=>import("./DepositPage-BCSsZB3k.js"),__vite__mapDeps([6,1,2,3,4])).then(e=>({default:e.DepositPage}))),Tt=o.lazy(()=>x(()=>import("./MorePage-DEM3SRAb.js"),__vite__mapDeps([7,1,2,3,4])).then(e=>({default:e.MorePage}))),Pt=()=>n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:n.jsx("div",{style:{width:20,height:20,border:"2px solid #222",borderTopColor:"#3498db",borderRadius:"50%",animation:"spin .6s linear infinite"}})});function wt(){const{activeTab:e,setActiveTab:t,isLoading:r}=D(),c=o.useRef(null);return o.useEffect(()=>{const s=c.current;if(!s)return;const i=()=>{s.scrollTop===0&&(s.scrollTop=1)};return s.addEventListener("touchstart",i,{passive:!0}),()=>s.removeEventListener("touchstart",i)},[]),o.useEffect(()=>{if(e!=="order"){try{Oe()}catch{}const s=Ie(()=>{t("order")});return()=>{s();try{q()}catch{}}}else try{q()}catch{}},[e,t]),o.useEffect(()=>{try{const s=Le(()=>{t("more"),v()});return()=>s()}catch{}},[t]),n.jsxs(Z,{children:[n.jsx("div",{className:"scroll-wrapper",ref:c,children:n.jsxs(o.Suspense,{fallback:n.jsx(Pt,{}),children:[e==="order"&&n.jsx(xt,{}),e==="history"&&n.jsx(At,{}),e==="deposit"&&n.jsx(Ct,{}),e==="more"&&n.jsx(Tt,{})]})}),n.jsx(bt,{}),n.jsx(vt,{}),n.jsx(_t,{visible:r})]})}function Et(){return n.jsx(gt,{children:n.jsx(wt,{})})}class kt extends o.Component{state={};static getDerivedStateFromError=t=>({error:t});componentDidCatch(t){this.setState({error:t})}render(){const{state:{error:t},props:{fallback:r,children:c}}=this;return"error"in this.state?typeof r=="function"?n.jsx(r,{error:t}):r:c}}function jt({error:e}){return n.jsxs("div",{style:{padding:20,textAlign:"center",color:"#ff4757"},children:[n.jsx("p",{children:"Something went wrong:"}),n.jsx("blockquote",{children:n.jsx("code",{children:e instanceof Error?e.message:typeof e=="string"?e:JSON.stringify(e)})})]})}function Ot(){return n.jsx(kt,{fallback:jt,children:n.jsx(Et,{})})}function It(){const[e,t]=o.useMemo(()=>{try{const r=k(),{bg_color:c}=r.tgWebAppThemeParams;return[r.tgWebAppPlatform,c&&Me(c)?De(c):!1]}catch{return["android",!1]}},[]);return n.jsx(Z,{appearance:t?"dark":"light",platform:["macos","ios"].includes(e)?"ios":"base",children:n.jsx(ke,{header:"Oops",description:"You are using too old Telegram client to run this application",children:n.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})})})}async function Lt(e){if(Re(e.debug),Ne(),e.mockForMacOS){let r=!1;Be({onEvent(c,s){if(c[0]==="web_app_request_theme"){let i={};return r?i=qe():(r=!0,i||=k().tgWebAppThemeParams),G("theme_changed",{theme_params:i})}if(c[0]==="web_app_request_safe_area")return G("safe_area_changed",{left:0,top:0,right:0,bottom:0});s()}})}Fe.ifAvailable(),Ue(),g.mountSync.isAvailable()&&(g.mountSync(),Ve()),oe();const t=[];J.isAvailable()&&t.push(J().then(()=>{He(),se()}).catch(()=>{})),t.push((async()=>{try{const{setHeaderColor:r,setBackgroundColor:c}=await x(async()=>{const{setHeaderColor:s,setBackgroundColor:i}=await Promise.resolve().then(()=>ct);return{setHeaderColor:s,setBackgroundColor:i}},void 0);r("#0a0a0f"),c("#0a0a0f")}catch{}})()),t.push((async()=>{try{if(ze.ifAvailable(),$e.ifAvailable(),Y.isAvailable()){Y();try{We()}catch{}}}catch{}})()),e.eruda&&x(async()=>{const{default:r}=await import("./eruda-BSaaGdH0.js").then(c=>c.e);return{default:r}},__vite__mapDeps([8,1])).then(({default:r})=>{r.init(),r.position({x:window.innerWidth-50,y:0})}),await Promise.allSettled(t)}const Q=Pe.createRoot(document.getElementById("root"));try{const e=k(),{tgWebAppPlatform:t}=e,r=(e.tgWebAppStartParam||"").includes("platformer_debug")||!1;Lt({debug:r,eruda:r&&["ios","android"].includes(t),mockForMacOS:t==="macos"}).then(()=>{}),Q.render(n.jsx(o.StrictMode,{children:n.jsx(Ot,{})}))}catch{Q.render(n.jsx(It,{}))}export{Ge as P,Ft as Q,st as a,Qe as b,tt as c,et as d,Xe as e,Bt as f,Nt as g,v as h,Ze as i,at as o,Ut as p,rt as s,D as u};
