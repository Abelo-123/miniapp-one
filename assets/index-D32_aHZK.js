const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OrderPage-DD_a-vAB.js","assets/react-vendor-C-oIHjE7.js","assets/tma-ui-BXUja-_9.js","assets/tma-ui-CjZnkA_L.css","assets/tma-sdk-B1EfXx2E.js","assets/HistoryPage-O1VbzHNj.js","assets/DepositPage-CCBOXKcp.js","assets/MorePage-DoPBYNbh.js","assets/eruda-BSaaGdH0.js"])))=>i.map(i=>d[i]);
import{r as o,j as n,d as Ae}from"./react-vendor-C-oIHjE7.js";import{T as $,S as Pe,a as we,A as Z,P as ke}from"./tma-ui-BXUja-_9.js";import{z as _,Y as p,U as w,Z as y,n as W,h as E,W as Ee,G as k,j as je,L as Oe,D as q,l as Ie,J as Le,H as De,P as Me,a as Re,$ as Ne,b as Be,c as Fe,e as Ue,T as J,N as Ve,C as He,u as ze,S as Y,g as $e,K as We,d as G}from"./tma-sdk-B1EfXx2E.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}})();const qe="modulepreload",Je=function(e){return"/miniapp-one/"+e},K={},x=function(t,r,i){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");a=Promise.allSettled(r.map(m=>{if(m=Je(m),m in K)return;K[m]=!0;const b=m.endsWith(".css"),A=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${A}`))return;const h=document.createElement("link");if(h.rel=b?"stylesheet":qe,b||(h.as="script"),h.crossOrigin="",h.href=m,f&&h.setAttribute("nonce",f),document.head.appendChild(h),b)return new Promise((j,C)=>{h.addEventListener("load",j),h.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})},Ye="https://paxyo.com/backend",Ge=[{id:"instagram",label:"Instagram",icon:"ðŸ“¸",keywords:["instagram","ig "],placeholder:"https://instagram.com/username"},{id:"tiktok",label:"TikTok",icon:"ðŸŽµ",keywords:["tiktok","tik tok"],placeholder:"https://tiktok.com/@username/video/..."},{id:"youtube",label:"YouTube",icon:"â–¶ï¸",keywords:["youtube","yt "],placeholder:"https://youtube.com/watch?v=..."},{id:"facebook",label:"Facebook",icon:"ðŸ‘¤",keywords:["facebook","fb "],placeholder:"https://facebook.com/..."},{id:"twitter",label:"Twitter / X",icon:"ðŸ¦",keywords:["twitter","x.com","tweet"],placeholder:"https://x.com/username/status/..."},{id:"telegram",label:"Telegram",icon:"âœˆï¸",keywords:["telegram","tg "],placeholder:"https://t.me/channel_name"},{id:"other",label:"Other",icon:"ðŸŒ",keywords:[],placeholder:"https://..."},{id:"top",label:"Top",icon:"â­",keywords:[],placeholder:"https://..."}];function Nt(e,t){const r=e.toLowerCase();return r.includes("follower")||r.includes("subscriber")?"Profile URL":r.includes("like")||r.includes("view")||r.includes("comment")?"Post/Video URL":Ge.find(a=>a.id===t)?.placeholder||"https://..."}function Bt(e){return e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" ETB"}const Ke=3e3,Ft=10;let T=null;function X(){if(T!==null)return T;try{E(),T=!0}catch{T=!1}return T}function v(){try{_.selectionChanged.isAvailable()&&_.selectionChanged()}catch{}}function Qe(e="medium"){try{_.impactOccurred.isAvailable()&&_.impactOccurred(e)}catch{}}function Ze(e){try{_.notificationOccurred.isAvailable()&&_.notificationOccurred(e)}catch{}}async function ee(e,t){try{k.setItem.isAvailable()&&await k.setItem(e,t)}catch{}}async function te(e){try{if(k.getItem.isAvailable())return await k.getItem(e)}catch{}}function Xe(){try{w.enableConfirmation.isAvailable()&&w.enableConfirmation()}catch{}}function et(){try{w.disableConfirmation.isAvailable()&&w.disableConfirmation()}catch{}}function tt(e){try{p.setParams.isAvailable()&&p.setParams({text:e.text,backgroundColor:e.color,textColor:e.textColor,isEnabled:e.isEnabled,isVisible:e.isVisible??!0,isLoaderVisible:e.isLoaderVisible})}catch{}}function rt(){try{p.setParams.isAvailable()&&p.setParams({isVisible:!0})}catch{}}function at(){try{p.setParams.isAvailable()&&p.setParams({isVisible:!1})}catch{}}function st(e){try{if(p.onClick.isAvailable())return p.onClick(e)}catch{}return()=>{}}function re(){try{W.expand.isAvailable()&&W.expand()}catch{}}function ae(){try{return Ee.state()?.user??null}catch{return null}}function se(){try{y.ready.isAvailable()&&y.ready()}catch{}}function ot(e){try{y.setHeaderColor.isAvailable()&&y.setHeaderColor(e)}catch{}}function nt(e){try{y.setBackgroundColor.isAvailable()&&y.setBackgroundColor(e)}catch{}}const it=Object.freeze(Object.defineProperty({__proto__:null,cloudGet:te,cloudSet:ee,configureMainButton:tt,disableClosingConfirmation:et,enableClosingConfirmation:Xe,expandViewport:re,getInitDataUser:ae,hapticImpact:Qe,hapticNotification:Ze,hapticSelection:v,hideMainButton:at,isTelegramEnv:X,onMainButtonClick:st,setBackgroundColor:nt,setHeaderColor:ot,showMainButton:rt,signalReady:se},Symbol.toStringTag,{value:"Module"}));async function g(e,t){const r=`${Ye}${e}`,i=await fetch(r,{headers:{"Content-Type":"application/json",...t?.headers||{}},...t});if(!i.ok){const a=await i.text();throw new Error(a||`HTTP ${i.status}`)}return i.json()}const P="paxyo_services_cache",L="paxyo_services_timestamp",ct=5*60*1e3;async function lt(e=!0){if(e){const t=localStorage.getItem(P),r=localStorage.getItem(L);if(t&&r&&Date.now()-parseInt(r)<ct)return JSON.parse(t)}try{const t=await g("/get_services.php");return localStorage.setItem(P,JSON.stringify(t)),localStorage.setItem(L,Date.now().toString()),t}catch(t){const r=localStorage.getItem(P);if(r)return JSON.parse(r);throw t}}async function dt(){const e=await g("/get_services.php?refresh=1");return localStorage.setItem(P,JSON.stringify(e)),localStorage.setItem(L,Date.now().toString()),e}async function ut(){return g("/get_recommended.php")}async function Ut(e){return g("/process_order.php",{method:"POST",body:JSON.stringify(e)})}async function ft(){return g("/get_orders.php")}async function mt(){return g("/get_deposits.php")}async function ht(){return g("/get_alerts.php")}async function pt(){return g("/get_settings.php")}const oe=o.createContext(null);function D(){const e=o.useContext(oe);if(!e)throw new Error("useApp must be used within AppProvider");return e}function yt({children:e}){const t=X(),[r,i]=o.useState(null),[a,c]=o.useState([]),[u,f]=o.useState([]),[m,b]=o.useState(null),[A,h]=o.useState(null),[j,C]=o.useState(null),[ne,M]=o.useState([]),[ie,R]=o.useState([]),[ce,N]=o.useState([]),[le,de]=o.useState([]),[ue,B]=o.useState("order"),[fe,O]=o.useState([]),[me,he]=o.useState(!1),[pe,F]=o.useState(0),[S,ye]=o.useState({rateMultiplier:1,discountPercent:0,holidayName:"",maintenanceMode:!1,userCanOrder:!0,marqueeText:"Welcome to Paxyo SMM!"}),U=o.useCallback(async()=>{try{const l=(await lt(!1)).map(d=>({id:d.service,category:d.category,name:d.name,type:d.type,rate:parseFloat(d.rate),min:d.min,max:d.max,averageTime:d.average_time||d.averageTime||"",refill:d.refill,cancel:d.cancel}));c(l),dt().catch(console.error)}catch(s){console.error("Failed to fetch services:",s)}},[]),V=o.useCallback(async()=>{try{const s=await ft();M(s.orders||[])}catch(s){console.error("Failed to fetch orders:",s)}},[]),H=o.useCallback(async()=>{try{const s=await mt();R(s||[])}catch(s){console.error("Failed to fetch deposits:",s)}},[]),z=o.useCallback(async()=>{try{const s=await ht();N(s.alerts||[]),F(s.unread_count||0)}catch(s){console.error("Failed to fetch alerts:",s)}},[]);o.useEffect(()=>{(async()=>{try{const l=await pt();ye(l)}catch(l){console.error("Failed to fetch settings:",l)}await U();try{const l=await ut();f(l||[])}catch(l){console.error("Failed to fetch recommended:",l)}V(),H(),z()})()},[]);const ge=o.useCallback(s=>{i(l=>l&&{...l,balance:s})},[]),be=o.useCallback((s,l)=>{const d=Date.now().toString()+Math.random().toString(36).slice(2);O(I=>[...I,{id:d,type:s,message:l}]),setTimeout(()=>{O(I=>I.filter(Te=>Te.id!==d))},Ke)},[]),Se=o.useCallback(s=>{O(l=>l.filter(d=>d.id!==s))},[]);o.useEffect(()=>{h(null),C(null)},[m]),o.useEffect(()=>{C(null)},[A]),o.useEffect(()=>{try{const s=ae();s&&i({id:s.id,first_name:s.first_name,last_name:s.last_name,username:s.username,display_name:[s.first_name,s.last_name].filter(Boolean).join(" "),photo_url:s.photo_url??"",balance:0})}catch{}},[]);const ve=o.useCallback(s=>{B(s),t&&(v(),ee("last_tab",s))},[t]),_e=o.useCallback(s=>{b(s),s&&t&&v()},[t]),xe=o.useCallback(s=>{C(s),s&&t&&v()},[t]);o.useEffect(()=>{t&&(async()=>{const s=await te("last_tab");s&&["order","history","deposit","more"].includes(s)&&B(s)})()},[t]);const Ce={user:r,isTelegramApp:t,services:a,recommendedIds:u,selectedPlatform:m,selectedCategory:A,selectedService:j,orders:ne,deposits:ie,alerts:ce,chatMessages:le,rateMultiplier:S.rateMultiplier,discountPercent:S.discountPercent,holidayName:S.holidayName,maintenanceMode:S.maintenanceMode,userCanOrder:S.userCanOrder,marqueeText:S.marqueeText,activeTab:ue,toasts:fe,isLoading:me,unreadAlerts:pe,setUser:i,setActiveTab:ve,setSelectedPlatform:_e,setSelectedCategory:h,setSelectedService:xe,setOrders:M,setDeposits:R,setAlerts:N,setChatMessages:de,setBalance:ge,setIsLoading:he,setUnreadAlerts:F,showToast:be,removeToast:Se,refreshServices:U,refreshOrders:V,refreshDeposits:H,refreshAlerts:z};return n.jsx(oe.Provider,{value:Ce,children:e})}const gt=[{id:"order",label:"Order",icon:"ðŸ›’"},{id:"history",label:"History",icon:"ðŸ“‹"},{id:"deposit",label:"Deposit",icon:"ðŸ’°"},{id:"more",label:"More",icon:"âš™ï¸"}];function bt(){const{activeTab:e,setActiveTab:t,unreadAlerts:r}=D(),i=a=>{t(a),v()};return n.jsx($,{children:gt.map(a=>n.jsx($.Item,{selected:e===a.id,text:a.id==="more"&&r>0?`${a.label} (${r>9?"9+":r})`:a.label,onClick:()=>i(a.id),children:n.jsx("span",{style:{fontSize:24},children:a.icon})},a.id))})}const St={success:"âœ…",error:"âŒ",info:"â„¹ï¸"};function vt(){const{toasts:e,removeToast:t}=D();if(e.length===0)return null;const r=e[e.length-1];return n.jsx(Pe,{before:n.jsx("span",{style:{fontSize:20},children:St[r.type]||"â„¹ï¸"}),description:r.message,onClose:()=>t(r.id),duration:3e3,children:r.type==="success"?"Success":r.type==="error"?"Error":"Info"},r.id)}function _t({visible:e}){return e?n.jsx("div",{style:{position:"fixed",inset:0,zIndex:300,background:"var(--tg-theme-secondary-bg-color, rgba(0,0,0,0.5))",display:"flex",alignItems:"center",justifyContent:"center",opacity:.85},children:n.jsx(we,{size:"l"})}):null}const xt=o.lazy(()=>x(()=>import("./OrderPage-DD_a-vAB.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>({default:e.OrderPage}))),Ct=o.lazy(()=>x(()=>import("./HistoryPage-O1VbzHNj.js"),__vite__mapDeps([5,1,2,3,4])).then(e=>({default:e.HistoryPage}))),Tt=o.lazy(()=>x(()=>import("./DepositPage-CCBOXKcp.js"),__vite__mapDeps([6,1,2,3,4])).then(e=>({default:e.DepositPage}))),At=o.lazy(()=>x(()=>import("./MorePage-DoPBYNbh.js"),__vite__mapDeps([7,1,2,3,4])).then(e=>({default:e.MorePage}))),Pt=()=>n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:n.jsx("div",{style:{width:20,height:20,border:"2px solid #222",borderTopColor:"#3498db",borderRadius:"50%",animation:"spin .6s linear infinite"}})});function wt(){const{activeTab:e,setActiveTab:t,isLoading:r}=D(),i=o.useRef(null);return o.useEffect(()=>{const a=i.current;if(!a)return;const c=()=>{a.scrollTop===0&&(a.scrollTop=1)};return a.addEventListener("touchstart",c,{passive:!0}),()=>a.removeEventListener("touchstart",c)},[]),o.useEffect(()=>{if(e!=="order"){try{je()}catch{}const a=Oe(()=>{t("order")});return()=>{a();try{q()}catch{}}}else try{q()}catch{}},[e,t]),o.useEffect(()=>{try{const a=Ie(()=>{t("more"),v()});return()=>a()}catch{}},[t]),n.jsxs(Z,{children:[n.jsx("div",{className:"scroll-wrapper",ref:i,children:n.jsxs(o.Suspense,{fallback:n.jsx(Pt,{}),children:[e==="order"&&n.jsx(xt,{}),e==="history"&&n.jsx(Ct,{}),e==="deposit"&&n.jsx(Tt,{}),e==="more"&&n.jsx(At,{})]})}),n.jsx(bt,{}),n.jsx(vt,{}),n.jsx(_t,{visible:r})]})}function kt(){return n.jsx(yt,{children:n.jsx(wt,{})})}class Et extends o.Component{state={};static getDerivedStateFromError=t=>({error:t});componentDidCatch(t){this.setState({error:t})}render(){const{state:{error:t},props:{fallback:r,children:i}}=this;return"error"in this.state?typeof r=="function"?n.jsx(r,{error:t}):r:i}}function jt({error:e}){return n.jsxs("div",{style:{padding:20,textAlign:"center",color:"#ff4757"},children:[n.jsx("p",{children:"Something went wrong:"}),n.jsx("blockquote",{children:n.jsx("code",{children:e instanceof Error?e.message:typeof e=="string"?e:JSON.stringify(e)})})]})}function Ot(){return n.jsx(Et,{fallback:jt,children:n.jsx(kt,{})})}function It(){const[e,t]=o.useMemo(()=>{try{const r=E(),{bg_color:i}=r.tgWebAppThemeParams;return[r.tgWebAppPlatform,i&&De(i)?Le(i):!1]}catch{return["android",!1]}},[]);return n.jsx(Z,{appearance:t?"dark":"light",platform:["macos","ios"].includes(e)?"ios":"base",children:n.jsx(ke,{header:"Oops",description:"You are using too old Telegram client to run this application",children:n.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})})})}async function Lt(e){if(Me(e.debug),Re(),e.mockForMacOS){let r=!1;Ne({onEvent(i,a){if(i[0]==="web_app_request_theme"){let c={};return r?c=We():(r=!0,c||=E().tgWebAppThemeParams),G("theme_changed",{theme_params:c})}if(i[0]==="web_app_request_safe_area")return G("safe_area_changed",{left:0,top:0,right:0,bottom:0});a()}})}Be.ifAvailable(),Fe(),y.mountSync.isAvailable()&&(y.mountSync(),Ue()),se();const t=[];J.isAvailable()&&t.push(J().then(()=>{Ve(),re()}).catch(()=>{})),t.push((async()=>{try{const{setHeaderColor:r,setBackgroundColor:i}=await x(async()=>{const{setHeaderColor:a,setBackgroundColor:c}=await Promise.resolve().then(()=>it);return{setHeaderColor:a,setBackgroundColor:c}},void 0);r("#0a0a0f"),i("#0a0a0f")}catch{}})()),t.push((async()=>{try{if(He.ifAvailable(),ze.ifAvailable(),Y.isAvailable()){Y();try{$e()}catch{}}}catch{}})()),e.eruda&&x(async()=>{const{default:r}=await import("./eruda-BSaaGdH0.js").then(i=>i.e);return{default:r}},__vite__mapDeps([8,1])).then(({default:r})=>{r.init(),r.position({x:window.innerWidth-50,y:0})}),await Promise.allSettled(t)}const Q=Ae.createRoot(document.getElementById("root"));try{const e=E(),{tgWebAppPlatform:t}=e,r=(e.tgWebAppStartParam||"").includes("platformer_debug")||!1;Lt({debug:r,eruda:r&&["ios","android"].includes(t),mockForMacOS:t==="macos"}).then(()=>{}),Q.render(n.jsx(o.StrictMode,{children:n.jsx(Ot,{})}))}catch{Q.render(n.jsx(It,{}))}export{Ge as P,Ft as Q,at as a,Qe as b,tt as c,et as d,Xe as e,Bt as f,Nt as g,v as h,Ze as i,st as o,Ut as p,rt as s,D as u};
